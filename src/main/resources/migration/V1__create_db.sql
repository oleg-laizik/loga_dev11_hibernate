CREATE TABLE client
(
    id        INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name      VARCHAR(200) NOT NULL CHECK ( length(name) >= 3 )
);

CREATE TABLE planet
(
    id VARCHAR PRIMARY KEY,
    name VARCHAR(500) NOT NULL,
    CONSTRAINT valid_id CHECK ( id ~ '^[A-Z0-9]+$' )
);

CREATE TABLE ticket
(
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
    client_id INT REFERENCES client(id) ON DELETE CASCADE,
    from_planet_id VARCHAR REFERENCES planet(id) ON DELETE CASCADE,
    to_planet_id VARCHAR REFERENCES planet(id) ON DELETE CASCADE
);